<html>
    <head>
        <title>JapHard Chat</title>

        <!--
            Copyright 2009 Aaron Barnes <aaron.barnes@hbcosmo.com>

            This program is free software: you can redistribute it and/or modify
            it under the terms of the GNU General Public License as published by
            the Free Software Foundation, either version 3 of the License, or
            (at your option) any later version.

            This program is distributed in the hope that it will be useful,
            but WITHOUT ANY WARRANTY; without even the implied warranty of
            MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
            GNU General Public License for more details.

            You should have received a copy of the GNU General Public License
            along with this program.  If not, see <http://www.gnu.org/licenses/>
        -->


        <script type="text/javascript" src="/static/libs/jquery-1.3.2.min.js"></script>

        <script type="text/javascript">

            // Call this function on page load
            $(function()
            {
                $(window).load(function ()
                {
                    // When new-message-send button clicked
                    $('#new-message-send').click(function (event)
                    {
                        // Don't post form
                        event.preventDefault();

                        // Grab message text box contents
                        var message = $('#new-message-text').val();

                        // Reset text box
                        $('#new-message-text').val('');

                        // Post message to server
                        $.get('/msg?'+message, '', chat_update);
                    });
                });
            });

            // Handle reponses from server
            function chat_update(data)
            {
                $('#chat').append(data);
            }

        </script>
    </head>

    <body>
        <h1>JapHard Chat</h1>

        <div id="chat">
            <div class="message">
                <span class="author">Chat</span>
                <span class="message">Welcome!</span>
            </div>
        </div>

        <hr />

        <div id="new-message">
            <form>
                <textarea id="new-message-text"></textarea>
                <input type="submit" id="new-message-send" value="Send" />
            </form>
        </div>
    </body>
</html>
