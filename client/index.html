<html>
    <head>
        <title>JapHard Chat</title>

        <script type="text/javascript" src="./libs/jquery-1.3.2.min.js"></script>

        <script type="text/javascript">

            // Call this function on page load
            $(function()
            {
                $(window).load(function ()
                {
                    // When new-message-send button clicked
                    $('#new-message-send').click(function (event)
                    {
                        // Don't post form
                        event.preventDefault();

                        // Grab message text box contents
                        var message = $('#new-message-text').val();

                        // Reset text box
                        $('#new-message-text').val('');

                        // Post message to server
                        $.get('./msg?'+message, '', chat_update);
                    });
                });
            });

            // Handle reponses from server
            function chat_update(data)
            {
                $('#chat').append(data);
            }

        </script>
    </head>

    <body>
        <h1>JapHard Chat</h1>

        <div id="chat">
            <div class="message">
                <span class="author">Chat</span>
                <span class="message">Welcome!</span>
            </div>
        </div>

        <hr />

        <div id="new-message">
            <form>
                <textarea id="new-message-text"></textarea>
                <input type="submit" id="new-message-send" value="Send" />
            </form>
        </div>
    </body>
</html>
